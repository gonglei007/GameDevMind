<h2 align="center">JS语言</h2>
<p>
JS语言是一种非常轻量、灵活的编程语言，可以用于后端开发，制作命令行工具也非常便利。
</p>

**关键词:**<br/>
*js,nodejs,pm2,express*

----
## 运行环境

### 是什么？在哪用？

- **Node.js（后端）**
  - **特性**：
    - 单线程：使用单线程事件循环模型
    - 异步：基于事件驱动的异步I/O模型
  - **注意事项**：注意如何利用多进程来发挥CPU效能

- **HTML（前端）**：浏览器环境中的JavaScript运行环境

## 使用场景

### 是什么？在哪用？

- **服务器开发**：使用Node.js开发后端服务
- **Web前端开发**：浏览器端的交互和动态效果
- **工具（命令）脚本开发**：命令行工具和自动化脚本
- **工具（GUI）脚本开发**：使用electron等框架开发桌面应用
- **Unity脚本**：Unity引擎中的脚本开发

## 语言特色

### 对象

### 是什么？在哪用？

- **赋值**：对象赋值是引用传递
- **复制**：需要深拷贝才能创建对象的副本
- **引用**：对象通过引用传递，多个变量可能指向同一个对象

### 会遇到哪些问题？

- **引用传递导致的意外修改**：修改对象可能影响其他引用该对象的变量
- **解决方向**：需要深拷贝时使用 `JSON.parse(JSON.stringify())` 或专门的深拷贝库

### 异步编程

### 是什么？在哪用？

- **Promise**：处理异步操作的标准方式
- **async/await**：基于Promise的语法糖，使异步代码更易读
- **第三方模块**：
  - **async**：提供丰富的异步流程控制工具

### 会遇到哪些问题？

- **回调地狱**：嵌套的回调函数导致代码难以阅读和维护
- **解决方向**：使用Promise、async/await或async库来改善代码结构

### 函数

### 是什么？在哪用？

- **参数**：
  - **对象参数**：使用对象作为参数可以避免参数顺序问题，提高可读性
  - **引用传递**：对象参数通过引用传递

## 内存管理

### 会遇到哪些问题？用什么解决？

- **内存泄漏**
  - **问题**：由于JavaScript是一种动态语言，开发人员需要自己管理内存，如果不注意内存泄漏问题，可能会导致服务器崩溃或性能下降
  - **解决方向**：
    - **手动调用垃圾回收**：可以使用 `global.gc()` 函数手动触发垃圾回收机制，以释放不必要的内存。需要注意的是，手动调用垃圾回收可能会影响应用程序的性能，因此应该谨慎使用
    - **取消引用**：当变量不再需要时，应该将其设为 `null`，以取消对其的引用。这样，如果该变量是对象的引用，它所引用的对象就会变成不可达状态，从而成为垃圾，被垃圾回收机制回收
    - **关闭不必要的资源**：例如打开文件、数据库连接等资源应该及时释放，以避免不必要的资源占用导致内存泄漏
    - **避免循环引用**：由于JavaScript是一种动态语言，对象的引用关系很容易形成循环引用，从而导致内存泄漏。应该尽量避免循环引用，或者使用WeakMap等特殊的数据结构来处理引用关系
    - **使用流式处理数据**：流式处理数据是一种高效的方式，能够节省内存和处理时间。应该尽量使用流来处理数据，而不是将所有数据一次性加载到内存中

## Node.js

### 中间件

### 是什么？在哪用？

- **express**
  - **作用**：web程序开发
  - **应用举例**：可以用作GM后台开发

- **async**
  - **作用**：异步流程控制，提高代码的可读性和可维护性

- **bagpipe**
  - **作用**：并发控制
  - **应用**：可以让异步操作有序化

- **cron**
  - **作用**：调度
  - **应用**：用于定时触发任务

- **generic-pool**
  - **作用**：池子
  - **应用举例**：数据库的连接池管理

- **javascript-state-machine**
  - **作用**：状态机

### 工具

### 是什么？在哪用？

- **管理工具**
  - **pm2**：进程管理工具，用于保持Node.js应用运行

- **包安装工具**
  - **npm**：Node.js包管理器

- **版本工具**
  - **nvm**：Node.js版本管理工具

### 优势

### 是什么？在哪用？

- **高性能**
  - Node.js使用单线程事件循环模型，能够处理大量的并发连接，而且在处理I/O操作时表现出色，因此非常适合开发高性能的游戏服务器

- **轻量级**
  - Node.js的安装包很小，所以它非常适合部署在云环境中，能够更好地利用云资源，同时也能够减少服务器的资源消耗

- **JavaScript语言**
  - Node.js使用JavaScript语言，这是一种非常流行的语言，因此可以吸引更多的开发人员来开发游戏服务器

- **社区支持**
  - Node.js拥有庞大的社区，有很多开源的模块和库可以使用，这些模块和库可以极大地加速开发过程

- **可伸缩性**
  - Node.js的事件循环模型可以让开发者轻松实现水平扩展，可以让服务器轻松应对高并发的情况

### 劣势

### 会遇到哪些问题？用什么解决？

- **不适合CPU密集型任务**
  - **问题**：虽然Node.js在I/O操作时非常出色，但是在执行CPU密集型任务时，由于使用单线程模型，性能表现不如多线程语言，比如Java和C++
  - **解决方向**：这种任务可以考虑用高性能语言开发独立的服务进行调用

- **回调函数的嵌套**
  - **问题**：在Node.js中，由于回调函数的嵌套，代码的可读性会变差，同时也容易出现回调地狱问题，这可能会给代码的维护和调试带来困难
  - **解决方向**：可以借助异步流控制来让回调更可读

- **内存泄漏**
  - **问题**：由于JavaScript是一种动态语言，开发人员需要自己管理内存，如果不注意内存泄漏问题，可能会导致服务器崩溃或性能下降
  - **解决方向**：参考"内存管理"部分的建议

- **缺少标准库**
  - **问题**：与其他编程语言相比，Node.js的标准库比较小，因此开发人员需要依赖第三方模块和库来完成更多的功能
  - **影响**：影响不大，丰富的npm生态可以弥补

## 更多资料