<h2 align="center">C#语言</h2>
<p>
C#是一个便捷、高效的编程语言，在前端开发中应用的较多，开发各类GUI工具也很好用。
</p>

**关键词:**<br/>
*C#,lambda表达式,泛型,dotnet,mono,IL2CPP,Unity,委托,事件,反射,GC,垃圾回收,协程,装箱拆箱,异步编程,Async,Await,UniTask,虚方法,抽象方法,Visual Studio*

----
## 使用场景

### 是什么？在哪用？

- **Unity脚本**：Unity引擎的主要脚本语言之一
- **工具开发**：无论是开发命令行工具，还是图形界面工具，C#（dotnet框架）都提供了一个非常高效的开发环境
- **业务层功能开发**：比如在AWS的Lambda服务中开发功能

## 类

### 会遇到哪些问题？用什么解决？

- **封闭类（sealed）的扩展问题**
  - **问题**：通常封闭类的意图是要让这个类停止拓展了，但有的应用场景却需要拓展一个类。这时候就需要使用一些特定的方法来实现
  - **解决方向**：使用接口注入的方法，通过扩展方法（Extension Methods）和静态字典来实现对封闭类的功能扩展

## 虚方法

### 是什么？在哪用？

- **virtual**：当你有意图让一个方法能在子类中有不同的实现，可以让这个方法定义为virtual
- **override**：当你想重写父类的虚方法，可以在子类使用override
- **base**：当你想一个子类的重写方法内也要做一下父类的虚方法的工作，可以使用base来调用父类的虚方法

### 好处

- 更好的复用和扩展

## 抽象方法

### 是什么？在哪用？

- **abstract**：跟virtual的不同是abstract不提供实现
- **作用**：当你希望一个类有一些行为，但这个行为需要各个子类自己进行定义的时候，可以使用abstract

## 委托

### 是什么？在哪用？

- **说明**：委托是一个类，它可以定义一个或多个函数指针，可以将一个函数指针赋值给委托变量，然后通过调用委托来调用委托变量所指向的函数
- **作用**：委托可以被用于实现回调函数或者作为参数传递给其他函数使用

## 事件

### 是什么？在哪用？

- **说明**：
  - 事件是一种特殊的委托，它是用于向其他对象或组件发送通知的机制
  - 事件是一种多播委托，它可以让多个委托关联在一起，当事件触发时，所有关联的委托都会被依次调用
- **作用**：事件通常用于实现消息传递机制，让不同的对象之间进行通信

## 反射

### 是什么？在哪用？

- **应用**：运行时"自外而内"的对对象进行操作
- **使用场景**：动态加载类型、调用方法、访问属性等需要运行时类型信息的场景

## 垃圾回收（GC）

### 会遇到哪些问题？用什么解决？

- **性能考虑**：
  - **避免大对象分配**：减少GC压力
  - **避免内存泄漏**：确保对象能被正确回收
  - **慎用GC.Collect**：手动触发GC可能影响性能
  - **预设定好容器大小**：减少运行时的不断扩展，避免频繁的内存重新分配
  - **ArrayPool**：使用对象池复用数组，减少分配
  - **使用结构**：值类型在栈上分配，减少堆分配
  - **慎用Finalize**：Finalize方法会影响GC性能
  - **StringBuilder**：字符串拼接时使用StringBuilder而不是直接拼接

## 协程

### 是什么？在哪用？

- **说明**：协程是一种特殊的迭代器，可以使得程序在执行过程中能够暂停、等待一段时间后再继续执行
- **作用**：这种特性可以使得程序更加灵活和高效，可以用于实现一些复杂的逻辑和算法
- **应用场景**：Unity中常用于实现延迟执行、分帧处理等异步逻辑

## 装箱拆箱

### 是什么？在哪用？

- **装箱**：将值类型转换成引用类型
- **拆箱**：将引用类型转换成值类型
- **用处举例**：
  - 想让一个方法的参数不预定为某个具体的数值类型
  - 想做一个容器，包含的非特定类型的数值

### 会遇到哪些问题？

- **性能问题**：装箱和拆箱会带来性能开销，应尽量避免不必要的装箱拆箱操作

## 异步编程

### 是什么？在哪用？

- **Async/Await**：C#的异步编程模型，用于处理异步操作
- **适用场景**：
  - 有IO操作的地方
  - **举例**：
    - 网络请求
    - 文件操作

### 会遇到哪些问题？

- **死锁风险**：不当使用async/await可能导致死锁
- **性能考虑**：在Unity中，async/await与协程的性能对比需要根据具体场景选择

## 泛型和系统类

### 是什么？在哪用？

- **泛型**：提供类型参数化，实现代码复用和类型安全
- **系统类**：.NET框架提供的丰富类库

## 异常

### 是什么？在哪用？

- **异常处理**：用于捕获和处理程序运行时的错误
- **最佳实践**：合理使用try-catch，避免过度捕获异常

## 中间件

### 是什么？在哪用？

- **UniTask**：
  - **作用**：提供了一个异步流程控制的库
  - **应用场景**：Unity中的高性能异步编程，比传统Task性能更好

## .Net

### 是什么？在哪用？

- **IL2CPP**：将IL代码转换为C++代码，提高性能
- **AOT编译器**：提前编译，提高运行时性能
- **Mono编译器**：跨平台的.NET运行时

### 会遇到哪些问题？

- **平台兼容性**：不同编译器的行为可能略有差异
- **性能差异**：IL2CPP通常性能更好，但编译时间更长

## IDE

### 是什么？在哪用？

- **Visual Studio**：微软官方IDE，功能强大
- **Mono**：跨平台开发环境

## 更多资料

### 在线教程
* [C# Tutorial](https://tutorial.techaltum.com/C-Sharp.html) - 在线C#教程。
* [C# Design Patterns](https://www.dofactory.com/net/design-patterns) - C#设计模式的实现。

### 文章资料
* [Performance in Unity: async, await, and Tasks vs. coroutines, C# Job System, and burst compiler](https://blog.logrocket.com/performance-unity-async-await-tasks-coroutines-c-job-system-burst-compiler/) - 本文介绍什么是 C# 中的 async、await 和 Task，以及如何在 Unity 中使用它们来提高项目性能。
* [C# Virtual](https://linuxhint.com/virtual-csharp/) - 关于C#的虚函数。