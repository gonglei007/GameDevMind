<h2 align="center">计算机网络</h2>
<p>
在网络游戏开发中，需要有一个快速稳定的网络环境。在搭建这个网络环境的时候，需要对计算机网络有一定的了解。
</p>

**关键词:**<br/>
*计算机网络,网络协议,TCP,IP,UDP,HTTP,HTTPS,DNS,域名解析,DHCP,IPv6,IPv4,网络安全,OSI,五层模型,七层模型,TCP/IP,应用层,传输层,网络层,数据链路层,物理层,时延,速率,带宽,吞吐量,RTT,往返时间,信道利用率,FTP,SSH,DDoS,防火墙,VPN,加密,数字签名*

**标签:**<br/>
*等级: 中级, 阶段: 学习|开发|运营, 分类: 基础能力, 角色: 客户端开发|服务端开发|运维*

----
## 技术应用

**是什么？在哪用？**
- **作用**：网络游戏运维中，特别是在跨境网络环境中，需要用到一些网络环境相关的技术
- **应用场景**：
  - 网络游戏运维
  - 跨境网络环境
  - 服务器部署
  - 网络优化
- **说明**：这些可能不是由研发团队来处理，但也可能会有一些跟运维团队的技术上的沟通

**要点和思考方向**
- 理解网络基础知识有助于与运维团队沟通
- 游戏开发中需要了解网络协议、性能指标等
- 跨境游戏需要考虑网络延迟和稳定性

## 性能指标

**是什么？在哪用？**
- **作用**：评估网络性能的关键指标
- **应用场景**：
  - 网络性能评估
  - 服务器容量规划
  - 游戏体验优化
  - 成本预算

## 时延

**是什么？在哪用？**
- **作用**：数据从发送端到接收端所需的时间
- **应用场景**：
  - 评估网络延迟
  - 游戏同步策略设计
  - 用户体验优化
- **包括**：
  - **发送时延**：数据从发送端到传输介质的时间
  - **传播时延**：数据在传输介质中传播的时间
  - **处理时延**：节点处理数据的时间
  - **排队时延**：数据在队列中等待的时间
- **影响**：时延直接影响游戏的实时性和用户体验

**会遇到哪些问题？用什么解决？**
- **时延过高**
  - **问题**：网络时延过高影响游戏体验
  - **解决方向**：
    - 选择地理位置近的服务器
    - 使用CDN加速
    - 优化网络路径
    - 使用预测和插值技术

**要点和思考方向**
- 时延是游戏网络最重要的指标之一
- 不同游戏类型对时延的要求不同（FPS要求低，SLG可以容忍较高）
- 需要监控和优化时延

## 速率

**是什么？在哪用？**
- **作用**：数据传输的快慢，影响数据传输效率
- **应用场景**：
  - 数据传输规划
  - 游戏类型选择
- **说明**：这个指标表示数据传输的快慢，不同的游戏类型会有不同的需求
- **应用**：根据游戏类型选择合适的传输速率

**会遇到哪些问题？用什么解决？**
- **速率不足**
  - **问题**：传输速率不足导致数据传输慢
  - **解决方向**：
    - 增加带宽
    - 优化数据传输（压缩、减少数据量）
    - 使用更高效的协议

**要点和思考方向**
- 速率影响数据传输效率
- 游戏开发中要注意数据量，避免传输过多数据
- 使用数据压缩可以减少传输量

## 带宽

**是什么？在哪用？**
- **作用**：网络的最大传输能力，影响同时在线人数和成本
- **应用场景**：
  - 服务器容量规划
  - 成本预算
  - 同时在线人数规划
- **说明**：这个指标会影响到游戏网络所能支撑的同时在线的人数。还有一些云服务的价格
- **应用**：规划服务器容量和成本预算

**会遇到哪些问题？用什么解决？**
- **带宽不足**
  - **问题**：带宽不足导致网络拥堵
  - **解决方向**：
    - 增加带宽
    - 优化数据传输（减少数据量）
    - 使用负载均衡
    - 限制单个连接的数据量

- **成本过高**
  - **问题**：带宽成本过高
  - **解决方向**：
    - 优化数据传输（压缩、减少数据量）
    - 使用CDN
    - 选择合适的云服务商
    - 监控和优化带宽使用

**要点和思考方向**
- 带宽直接影响成本和同时在线人数
- 游戏开发中要优化数据量，减少带宽消耗
- 使用数据压缩和优化协议可以减少带宽需求

## 吞吐量

**是什么？在哪用？**
- **作用**：单位时间内实际传输的数据量，反映服务器处理能力
- **应用场景**：
  - 服务器性能评估
  - 容量规划
- **说明**：这个指标关联服务器这边能承受的压力
- **应用**：评估服务器性能和容量

**会遇到哪些问题？用什么解决？**
- **吞吐量不足**
  - **问题**：服务器吞吐量不足导致性能瓶颈
  - **解决方向**：
    - 优化服务器性能
    - 使用负载均衡
    - 优化数据处理逻辑
    - 增加服务器数量

**要点和思考方向**
- 吞吐量反映服务器的实际处理能力
- 需要监控和优化吞吐量
- 游戏开发中要优化服务器处理逻辑

## 时延带宽积

**是什么？在哪用？**
- **作用**：时延和带宽的乘积，表示网络中能容纳的数据量
- **应用场景**：
  - 网络容量评估
  - 缓冲区大小设计
- **说明**：时延和带宽的乘积，表示网络中能容纳的数据量

**要点和思考方向**
- 时延带宽积用于设计网络缓冲区大小
- 理解这个概念有助于优化网络性能

## 往返时间（RTT）

**是什么？在哪用？**
- **作用**：数据从发送端到接收端再返回的时间，用于评估网络延迟
- **应用场景**：
  - 网络延迟评估
  - 游戏同步策略设计
  - 超时时间设置
- **说明**：数据从发送端到接收端再返回的时间
- **应用**：评估网络延迟，影响游戏同步策略

**会遇到哪些问题？用什么解决？**
- **RTT不稳定**
  - **问题**：RTT波动大导致游戏体验不稳定
  - **解决方向**：
    - 使用网络质量检测
    - 动态调整同步策略
    - 使用预测和插值
    - 选择稳定的网络路径

**要点和思考方向**
- RTT是评估网络延迟的重要指标
- 游戏开发中要根据RTT调整同步策略
- 需要监控RTT的变化

## 信道利用率

**是什么？在哪用？**
- **作用**：信道被有效利用的时间比例，评估网络资源利用效率
- **应用场景**：
  - 网络资源评估
  - 网络优化
- **说明**：信道被有效利用的时间比例
- **应用**：评估网络资源利用效率

**会遇到哪些问题？用什么解决？**
- **利用率过低**
  - **问题**：信道利用率过低浪费资源
  - **解决方向**：
    - 优化数据传输
    - 合并数据包
    - 减少不必要的传输

- **利用率过高**
  - **问题**：信道利用率过高可能导致拥堵
  - **解决方向**：
    - 增加带宽
    - 优化数据传输
    - 使用负载均衡

**要点和思考方向**
- 信道利用率反映网络资源利用效率
- 需要平衡利用率和性能
- 游戏开发中要优化数据传输，提高利用率

## 网络协议（五层）

**是什么？在哪用？**
- **作用**：分层架构将网络功能分为五层，每层负责不同的功能，便于理解和实现
- **应用场景**：
  - 网络协议设计
  - 网络问题排查
  - 网络优化
- **分层架构**：将网络功能分为五层，每层负责不同的功能

**要点和思考方向**
- 理解网络分层有助于理解网络协议
- 每层都有其特定的功能和协议
- 游戏开发中主要关注应用层和传输层

## 应用层

**是什么？在哪用？**
- **作用**：为应用程序提供网络服务
- **应用场景**：
  - Web应用
  - 文件传输
  - 远程管理
  - 域名解析
- **常见协议**：
  - **HTTP/HTTPS**：超文本传输协议，用于Web应用
  - **FTP**：文件传输协议
  - **SSH**：安全外壳协议，用于远程管理
  - **DNS**：域名解析服务，将域名转换为IP地址
  - **DHCP**：动态主机配置协议，自动分配IP地址

**会遇到哪些问题？用什么解决？**
- **HTTP vs HTTPS**
  - **问题**：何时使用HTTP，何时使用HTTPS？
  - **解决方向**：
    - 敏感数据使用HTTPS
    - 游戏登录、支付等使用HTTPS
    - 静态资源可以使用HTTP（但建议使用HTTPS）

- **DNS解析慢**
  - **问题**：DNS解析慢影响连接速度
  - **解决方向**：
    - 使用HTTP DNS
    - 缓存DNS解析结果
    - 使用CDN
    - 预解析域名

**要点和思考方向**
- 应用层协议选择要根据应用需求
- 游戏开发中HTTP/HTTPS用于登录、支付等
- DNS解析可能影响连接速度，需要优化

## DNS

**是什么？在哪用？**
  - **作用**：域名解析服务，将域名转换为IP地址
- **应用场景**：
  - 域名访问
  - 服务器发现
  - 负载均衡

**会遇到哪些问题？用什么解决？**
- **DNS解析失败**
  - **问题**：DNS解析失败导致无法连接
  - **解决方向**：
    - 使用备用DNS服务器
    - 使用HTTP DNS
    - 缓存DNS解析结果
    - 处理DNS错误

- **DNS劫持**
  - **问题**：DNS被劫持导致访问错误
  - **解决方向**：
    - 使用HTTPS
    - 使用HTTP DNS
    - 验证IP地址
    - 使用DNS over HTTPS（DoH）

**要点和思考方向**
- DNS是网络连接的第一步，影响连接速度
- 游戏开发中可以使用HTTP DNS提高解析速度
- 注意DNS安全和可靠性

## DHCP

**是什么？在哪用？**
  - **作用**：动态主机配置协议，自动分配IP地址
- **应用场景**：
  - 局域网配置
  - 移动设备网络配置
- **说明**：通常由操作系统和网络设备处理，游戏开发中较少直接使用

**要点和思考方向**
- DHCP通常由系统处理，游戏开发中较少直接使用
- 理解DHCP有助于理解网络配置

## 传输层

**是什么？在哪用？**
- **作用**：提供端到端的数据传输服务
- **应用场景**：
  - 游戏网络通信
  - 数据传输
  - 实时同步

## TCP

**是什么？在哪用？**
- **作用**：面向连接的可靠传输协议
- **应用场景**：
  - 需要可靠传输的场景
  - 游戏登录
  - 重要数据同步
  - WebSocket通信
- **特点**：
  - 面向连接
  - 可靠传输
  - 有序传输
  - 流量控制
  - 拥塞控制

**会遇到哪些问题？用什么解决？**
- **延迟较高**
  - **问题**：TCP的可靠传输机制可能导致延迟较高
  - **解决方向**：
    - 使用UDP（如果允许）
    - 优化TCP参数
    - 使用TCP_NODELAY选项
    - 减少数据包数量

- **粘包问题**
  - **问题**：TCP是流式协议，数据包可能粘在一起
  - **解决方向**：
    - 使用包头+包体格式
    - 包头包含包体长度
    - 正确解析数据包

**要点和思考方向**
- TCP适合需要可靠传输的场景
- 游戏开发中常用于登录、支付等重要功能
- 注意处理粘包问题

## UDP

**是什么？在哪用？**
- **作用**：无连接的快速传输协议
- **应用场景**：
  - 实时性要求高的场景
  - 游戏实时同步
  - 语音通话
  - FPS游戏
- **特点**：
  - 无连接
  - 快速传输
  - 低延迟
  - 不保证可靠传输

**会遇到哪些问题？用什么解决？**
- **丢包问题**
  - **问题**：UDP不保证可靠传输，可能丢包
  - **解决方向**：
    - 实现可靠UDP（如KCP）
    - 使用冗余数据
    - 实现重传机制
    - 容忍部分丢包（如果适用）

- **乱序问题**
  - **问题**：UDP数据包可能乱序到达
  - **解决方向**：
    - 添加序列号
    - 按序列号排序
    - 丢弃过期数据包
    - 使用时间戳

**要点和思考方向**
- UDP适合实时性要求高的场景
- 游戏开发中常用于实时同步（FPS、RTS等）
- 需要自己处理可靠性和乱序问题
- 可以使用可靠UDP库（如KCP）

## TCP vs UDP选择

**会遇到哪些问题？用什么解决？**
- **协议选择**
  - **问题**：不同场景需要选择不同的传输协议
  - **解决方向**：
    - 需要可靠传输时使用TCP
    - 需要低延迟时使用UDP，但需要自己处理丢包和乱序
    - 可以混合使用（TCP用于重要数据，UDP用于实时数据）
    - 使用可靠UDP（如KCP）平衡可靠性和延迟

**要点和思考方向**
- TCP和UDP各有优缺点，要根据场景选择
- 游戏开发中通常混合使用
- 实时性要求高的游戏优先使用UDP

## 网络层

**是什么？在哪用？**
- **作用**：提供网络路由和寻址功能
- **应用场景**：
  - 网络路由
  - IP地址分配
  - 跨网络通信

## IPv4

**是什么？在哪用？**
- **作用**：目前主流的IP协议版本
- **应用场景**：
  - 大多数网络应用
  - 游戏服务器
- **特点**：
  - 32位地址
  - 地址空间有限（约42亿个地址）
  - 广泛支持

**会遇到哪些问题？用什么解决？**
- **地址耗尽**
  - **问题**：IPv4地址资源有限，已接近耗尽
  - **解决方向**：
    - 使用IPv6
    - 使用NAT技术
    - 使用私有IP地址

**要点和思考方向**
- IPv4是目前主流的IP协议
- 地址资源有限，需要合理使用
- 游戏开发中通常使用NAT技术

## IPv6

**是什么？在哪用？**
- **作用**：下一代IP协议，地址空间更大
- **应用场景**：
  - 新网络应用
  - 移动网络
  - 物联网
- **特点**：
  - 128位地址
  - 地址空间巨大
  - 更好的安全性
  - **注意**：苹果APP如果要发布商店，是需要支持IPv6的

**会遇到哪些问题？用什么解决？**
- **兼容性问题**
  - **问题**：IPv6和IPv4不兼容
  - **解决方向**：
    - 同时支持IPv4和IPv6（双栈）
    - 使用转换技术
    - 逐步迁移到IPv6

- **支持不完善**
  - **问题**：部分网络和设备不支持IPv6
  - **解决方向**：
    - 同时支持IPv4和IPv6
    - 检测IPv6支持情况
    - 提供降级方案

**要点和思考方向**
- IPv6是未来的趋势
- 苹果APP Store要求支持IPv6
- 游戏开发中需要同时支持IPv4和IPv6
- 逐步迁移到IPv6

## 数据链路层

**是什么？在哪用？**
- **作用**：在物理层之上提供可靠的数据传输
- **应用场景**：
  - 局域网通信
  - 错误检测和纠正
- **说明**：通常由网络设备和驱动程序处理，游戏开发中较少直接使用

**要点和思考方向**
- 数据链路层通常由系统处理
- 理解数据链路层有助于理解网络通信

## 物理层

**是什么？在哪用？**
- **作用**：定义物理传输介质和信号传输方式
- **应用场景**：
  - 物理连接
  - 信号传输
- **说明**：通常由硬件处理，游戏开发中不直接使用

**要点和思考方向**
- 物理层是网络的基础
- 理解物理层有助于理解网络性能

## 体系结构

**是什么？在哪用？**
- **作用**：网络体系结构定义了网络的分层模型
- **应用场景**：
  - 理解网络协议
  - 网络问题排查
  - 网络协议设计

## OSI体系结构

**是什么？在哪用？**
- **作用**：理论参考模型，帮助理解网络分层
- **应用场景**：
  - 网络教学
  - 网络协议理解
  - 网络问题分析
- **七层模型**：
  - 应用层
  - 表示层
  - 会话层
  - 运输层
  - 网络层
  - 数据链路层
  - 物理层

**要点和思考方向**
- OSI是理论模型，帮助理解网络分层
- 实际应用中较少完全按照OSI模型实现
- 理解OSI模型有助于理解网络协议

## TCP/IP体系结构

**是什么？在哪用？**
- **作用**：实际使用的网络协议栈
- **应用场景**：
  - 实际网络应用
  - 游戏网络开发
- **四层模型**：
  - 应用层
  - 运输层
  - 网际层
  - 网络接口层

**要点和思考方向**
- TCP/IP是实际使用的网络协议栈
- 游戏开发中主要使用TCP/IP协议
- 理解TCP/IP模型有助于网络开发

## 网络安全

**是什么？在哪用？**
- **作用**：保护游戏服务器和玩家数据安全
- **应用场景**：
  - 游戏服务器防护
  - 数据传输安全
  - 用户身份验证
  - 防止作弊
- **内容**：
  - **网络攻击和防御**：DDoS攻击、SQL注入等攻击的防护
  - **加密技术**：数据加密传输
  - **数字签名**：验证数据完整性和身份
  - **身份认证**：用户身份验证
  - **防火墙**：网络访问控制
  - **VPN**：虚拟专用网络，提供安全连接

**会遇到哪些问题？用什么解决？**
- **网络攻击**
  - **问题**：游戏服务器可能面临各种网络攻击（DDoS、SQL注入、XSS等）
  - **解决方向**：
    - 使用防火墙
    - 使用DDoS防护服务
    - 使用WAF（Web应用防火墙）
    - 输入验证和过滤
    - 使用HTTPS加密通信
    - 定期安全审计

- **数据泄露**
  - **问题**：数据传输可能被窃听或篡改
  - **解决方向**：
    - 使用HTTPS/TLS加密
    - 使用数字签名验证数据完整性
    - 敏感数据加密存储
    - 使用安全的通信协议

- **身份伪造**
  - **问题**：用户身份可能被伪造
  - **解决方向**：
    - 使用身份认证（Token、JWT等）
    - 使用数字签名
    - 验证用户身份
    - 防止重放攻击

- **作弊问题**
  - **问题**：游戏可能被作弊
  - **解决方向**：
    - 服务器端验证
    - 数据加密
    - 反作弊系统
    - 行为分析

**要点和思考方向**
- 网络安全是游戏开发的重要方面
- 游戏服务器需要防护各种网络攻击
- 数据传输要使用加密（HTTPS/TLS）
- 用户身份要验证，防止伪造
- 游戏逻辑要在服务器端验证，防止作弊

## 更多资料

## 视频资料
* [什么是OSI七层模型？什么是TCP/IP协议五层模型？——五分钟理解网络分层模型](https://www.youtube.com/watch?v=2ukV7cPcOI0)
* [五分钟理解：TCP/IP协议中网络包层层嵌套的涵义。必须要一层套一层吗，不可以干净利落一点直接传输吗？不可以！](https://www.youtube.com/watch?v=3pnTsaLTSwc)

## 其它资料
* [Android 面试必备 - 计算机网络基本知识（TCP，UDP，Http，https）](https://cloud.tencent.com/developer/article/1572109)