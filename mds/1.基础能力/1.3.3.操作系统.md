<h2 align="center">操作系统</h2>
<p>
操作系统是程序运行的平台，游戏底层开发多少会需要对操作系统有些了解。
</p>

**关键词:**<br/>
*堆,栈,进程,线程,IO,同步,异步,地址空间*

----
## 硬件抽象层

### 是什么？在哪用？

- **作用**：操作系统提供硬件抽象层，屏蔽底层硬件细节，为应用程序提供统一的接口

## 内存管理

### 地址空间

### 是什么？在哪用？

- **Text/Code段**
  - **作用**：代码段，存储程序的可执行指令
  - **特点**：
    - 它只是用来执行的
    - 大小固定

- **Data段**
  - **Gvar部分**：保存初始化的全局变量
  - **BBS部分**：保存未初始化的数据
  - **Heap部分**：动态分配的内存区域

- **Stack段**：栈内存区域

### 堆 vs 栈

### 是什么？在哪用？

- **堆**
  - **位置**：处于高地址，地址向下增长
  - **特点**：
    - 在被显示的释放前，分配的内存始终占用内存空间（小心内存泄漏）
    - 要通过指针来访问动态分配的内存
    - 堆是一个很大的池子，所以大的数组、结构体和类应该分配到这里

- **栈**
  - **位置**：处于低地址，地址向上增长
  - **特点**：
    - 在栈上分配的内存只在它所在栈的生存期存在，即出栈之后这块内存即被销毁
    - 栈上分配的内存编译期即可知，也就是说它可以通过变量直接访问
    - 栈的空间相对小得多，不要在其中分配大量的空间，如局部数组。注意，递归函数可能使用掉大量的栈空间

### 会遇到哪些问题？

- **内存泄漏**
  - **问题**：堆上分配的内存如果没有正确释放，会导致内存泄漏
  - **解决方向**：使用智能指针、内存池等机制管理内存

- **栈溢出**
  - **问题**：递归函数或大局部变量可能导致栈溢出
  - **解决方向**：限制递归深度，避免在栈上分配大对象

## 进程和线程

### 是什么？在哪用？

- **进程**：程序的执行实例，拥有独立的内存空间
- **线程**：进程内的执行单元，共享进程的内存空间

### 知识点

- **锁**
  - **作用**：保证共享数据的正确性
  - **注意**：使用不好也会影响程序性能

- **优先级**：控制线程/进程的调度顺序

### 考虑场景

### 是什么？在哪用？

- **当想要尽量压榨IO或运算的时候**：使用多线程/多进程提高资源利用率

- **当一类任务不想被另一类任务干扰节奏的时候**：使用独立的线程/进程隔离不同类型的任务

### 会遇到哪些问题？

- **死锁**
  - **问题**：多个线程相互等待对方释放锁，导致程序无法继续执行
  - **解决方向**：避免嵌套锁、使用超时机制、按顺序获取锁

- **竞态条件**
  - **问题**：多个线程同时访问共享资源，导致数据不一致
  - **解决方向**：使用锁、原子操作、无锁数据结构

## IO

### 是什么？在哪用？

- **IO操作**：输入输出操作，包括文件读写、网络通信等

### 同步

### 是什么？在哪用？

- **说明**：其它的事都停下，等这个同步任务干完再继续
- **特点**：简单直接，但会阻塞程序执行

### 异步

### 是什么？在哪用？

- **说明**：当前的任务继续，异步任务去干，干好了通知一下
- **特点**：不阻塞程序执行，提高并发性能

### 会遇到哪些问题？

- **同步IO阻塞**
  - **问题**：同步IO会阻塞线程，影响程序响应性
  - **解决方向**：使用异步IO或多线程处理

- **异步IO复杂度**
  - **问题**：异步IO的代码逻辑相对复杂
  - **解决方向**：使用async/await等语法糖简化代码

## 文件管理

### 是什么？在哪用？

- **作用**：操作系统提供文件系统，管理文件的存储、读取、写入等操作
- **应用**：游戏资源文件管理、配置文件读写、日志记录等

## 网络管理

### 是什么？在哪用？

- **作用**：操作系统提供网络接口，管理网络通信
- **应用**：游戏客户端与服务器通信、多人游戏网络同步等

## 常见操作系统

### PC

### 是什么？在哪用？

- **Windows桌面版**：PC游戏的主要平台
- **Windows Server**
  - **应用**：也会用于游戏服务器

### Mac

### 是什么？在哪用？

- **OSX**：Mac平台的操作系统

### Linux

### 是什么？在哪用？

- **发行版**：
  - **Ubuntu**：常用的Linux发行版
  - **CentOS**：服务器常用的Linux发行版
- **应用**：常用于运行游戏服务器

### 华为

### 是什么？在哪用？

- **鸿蒙**：华为的移动操作系统

### Android

### 是什么？在哪用？

- **Android**：移动平台的主要操作系统之一

### iOS

### 是什么？在哪用？

- **iOS**：苹果移动平台的操作系统

### XBox

### 是什么？在哪用？

- **XBox OS**
  - **底层**：Windows NT kernel
  - **应用**：XBox游戏主机平台

### PS

### 是什么？在哪用？

- **PS System Software**
  - **底层**：采用了 FreeBSD
  - **应用**：PlayStation游戏主机平台

### Nintendo Switch

### 是什么？在哪用？

- **Nintendo Switch System Software**
  - **底层**：采用了基于 FreeBSD 的 Nintendo Switch Kernel
  - **应用**：Nintendo Switch游戏主机平台

## 更多资料
