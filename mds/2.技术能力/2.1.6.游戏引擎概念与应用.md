<h2 align="center">游戏引擎概念与应用</h2>
<p>
引擎是客户端开发最最重要的工具，对它的驾驭能力，直接决定产品的高度。
</p>

**关键词:**<br/>
*游戏引擎,Unity3D,UE,Unreal Engine,Asset,Plugin,ECS,Prefab,序列化*

**标签:**<br/>
*等级: 初级|中级, 阶段: 学习|开发, 分类: 技术能力, 角色: 客户端开发*

----
## 对象系统

### 是什么？在哪用？

- **作用**：游戏引擎的核心系统，管理游戏中的所有对象及其行为
- **应用场景**：
  - 游戏对象管理
  - 对象生命周期控制
  - 对象行为实现

### 部件系统

### 是什么？在哪用？

- **作用**：通过组件（Component）系统组织对象的功能和行为
- **应用场景**：
  - 对象功能组织
  - 代码复用
  - 模块化设计
- **对象属性**：定义对象的属性
  - **应用**：位置、旋转、缩放等变换属性
- **对象行为**：
  - **Start**：对象初始化时执行
    - **应用**：初始化逻辑
  - **Update**：每帧更新时执行
    - **应用**：每帧更新逻辑
  - **Active**：对象激活状态
    - **应用**：控制对象是否激活
- **脚本**：通过脚本控制对象行为
  - **应用**：实现游戏逻辑

### 会遇到哪些问题？用什么解决？

- **组件管理**
  - **问题**：大量组件可能导致性能问题
  - **解决方向**：
    - 优化组件更新
    - 使用组件池
    - 避免不必要的组件
    - 使用ECS架构（如果支持）

- **对象生命周期**
  - **问题**：对象创建和销毁管理不当导致内存问题
  - **解决方向**：
    - 使用对象池
    - 及时销毁不用的对象
    - 管理对象引用
    - 避免循环引用

### 要点和思考方向

- 对象系统是游戏引擎的核心
- 组件系统提供模块化设计
- 注意对象的生命周期管理
- 合理使用组件可以提高代码复用

### 预置体（Prefab）

### 是什么？在哪用？

- **作用**：Prefab相当于游戏对象的模版，对于有相同或者相似特性的游戏对象，可以用Prefab来对其实例化，这样就不用反复的配置其属性
- **应用场景**：
  - 重复对象的创建
  - 对象模板管理
  - 资源复用
- **优点**：
  - 提高开发效率
  - 统一管理对象配置
  - 支持批量修改

### 会遇到哪些问题？用什么解决？

- **Prefab变体管理**
  - **问题**：Prefab变体过多导致管理困难
  - **解决方向**：
    - 合理使用Prefab变体
    - 建立Prefab层级结构
    - 使用命名规范
    - 定期整理Prefab

- **Prefab引用**
  - **问题**：Prefab引用丢失或错误
  - **解决方向**：
    - 使用相对路径
    - 避免移动Prefab文件
    - 使用版本控制
    - 定期检查引用

### 要点和思考方向

- Prefab是对象模板，提高开发效率
- 合理使用Prefab可以减少重复工作
- 注意Prefab的引用管理
- 支持Prefab变体可以灵活配置

### 级联关系

### 是什么？在哪用？

- **作用**：定义对象之间的父子关系，实现层级组织
- **应用场景**：
  - 对象层级组织
  - 批量操作
  - 坐标变换
- **说明**：对象有级联关系，对一个对象的操作会影响到其子对象。如，移动一个对象，其子对象也跟随其移动
- **应用**：
  - 角色和装备的层级关系
  - UI元素的层级组织
  - 场景对象的组织

### 会遇到哪些问题？用什么解决？

- **层级过深**
  - **问题**：层级过深可能导致性能问题
  - **解决方向**：
    - 限制层级深度
    - 优化层级结构
    - 使用扁平化设计（如果适用）
    - 避免不必要的层级

- **坐标变换**
  - **问题**：父子对象的坐标变换计算复杂
  - **解决方向**：
    - 理解局部坐标和世界坐标
    - 正确计算变换矩阵
    - 使用引擎提供的API
    - 测试坐标变换

### 要点和思考方向

- 级联关系实现对象层级组织
- 父对象操作影响子对象
- 注意层级深度对性能的影响
- 理解坐标变换很重要

## 数据（Data）

### 是什么？在哪用？

- **作用**：管理游戏数据的存储、序列化和加载
- **应用场景**：
  - 游戏数据保存
  - 资源加载
  - 数据持久化

### 序列化（Serialization）

### 是什么？在哪用？

- **作用**：将对象转换为可存储或传输的格式
- **应用场景**：
  - 游戏数据保存
  - 网络传输
  - 资源序列化
- **格式**：
  - **二进制**：性能好，但不可读
  - **JSON**：可读性好，但性能较低
  - **XML**：可读性好，但体积大
  - **自定义格式**：平衡性能和可读性

### 会遇到哪些问题？用什么解决？

- **序列化性能**
  - **问题**：序列化可能影响性能
  - **解决方向**：
    - 选择合适的序列化格式
    - 优化序列化数据
    - 使用增量序列化
    - 异步序列化

- **版本兼容**
  - **问题**：数据格式版本更新导致兼容性问题
  - **解决方向**：
    - 使用版本号
    - 支持数据迁移
    - 向后兼容
    - 测试不同版本

### 要点和思考方向

- 序列化是数据持久化的基础
- 选择合适的序列化格式
- 注意版本兼容性
- 优化序列化性能

### 加载

### 是什么？在哪用？

- **作用**：从存储中加载游戏资源和数据
- **应用场景**：
  - 资源加载
  - 场景加载
  - 数据加载
- **同步**
  - **说明**：在主线程中一次性的（在一个loop中）执行完所有加载逻辑
  - **表现**：如果界面也在调用加载操作的线程中，在加载过程中界面将停止更新与响应
  - **应用**：小资源或必须同步加载的资源

- **异步**
  - **多线程**
    - **说明**：即多线程的加载，不影响其它逻辑的执行，如界面渲染、输入操作等
    - **应用**：大资源或可以异步加载的资源
  - **"伪"异步**
    - **说明**：自己管理资源加载，即在循环中一次加载一个或者一批资源，保证每个循环CPU可以执行其他的逻辑
    - **应用**：需要精确控制加载进度的场景

### 会遇到哪些问题？用什么解决？

- **加载阻塞**
  - **问题**：同步加载会阻塞主线程，导致界面卡顿
  - **解决方向**：
    - 使用异步加载，避免阻塞主线程
    - 显示加载进度
    - 预加载资源
    - 优化加载逻辑

- **资源管理**
  - **问题**：资源加载后需要正确释放，否则会导致内存泄漏
  - **解决方向**：
    - 建立资源引用计数机制，自动管理资源生命周期
    - 及时释放不用的资源
    - 使用资源池
    - 监控资源使用

- **加载顺序依赖**
  - **问题**：某些资源可能依赖其他资源，需要按顺序加载
  - **解决方向**：
    - 建立资源依赖关系图，按依赖顺序加载
    - 使用依赖注入
    - 预加载依赖资源
    - 处理加载失败

- **加载性能**
  - **问题**：加载速度慢影响用户体验
  - **解决方向**：
    - 优化资源大小
    - 使用资源压缩
    - 预加载常用资源
    - 使用流式加载

### 要点和思考方向

- 异步加载避免阻塞主线程
- 资源管理很重要，避免内存泄漏
- 处理资源依赖关系
- 优化加载性能提升用户体验

## 资产

### 是什么？在哪用？

- **作用**：游戏开发中使用的所有数字内容资源
- **应用场景**：
  - 游戏内容制作
  - 资源管理
  - 编辑器使用
- **说明**：制作游戏内容所需的文件
- **应用**：这个是编辑器所用的数字内容
- **类型**：
  - **模型**：3D模型文件
  - **贴图**：纹理图片
  - **音频**：音效和音乐
  - **脚本**：代码文件
  - **配置**：配置文件

### 会遇到哪些问题？用什么解决？

- **资产管理**
  - **问题**：大量资产难以管理
  - **解决方向**：
    - 建立资产命名规范
    - 使用目录结构组织
    - 使用资产数据库
    - 定期整理资产

- **资产依赖**
  - **问题**：资产之间的依赖关系复杂
  - **解决方向**：
    - 管理资产依赖关系
    - 使用依赖图
    - 处理依赖更新
    - 避免循环依赖

### 要点和思考方向

- 资产是游戏内容的基础
- 良好的资产管理提高开发效率
- 注意资产依赖关系
- 使用版本控制管理资产

## 脚本系统

### 是什么？在哪用？

- **作用**：通过脚本对游戏的内容进行管理、控制，和游戏业务的实现
- **应用场景**：
  - 游戏逻辑实现
  - 对象行为控制
  - 业务功能开发
- **语言**：
  - **C#**：Unity使用
  - **C++**：Unreal Engine使用
  - **Lua**：热更新脚本
  - **JavaScript**：部分引擎支持

### 脚本执行顺序

### 是什么？在哪用？

- **作用**：控制脚本的执行顺序，确保逻辑正确
- **应用场景**：
  - 初始化顺序
  - 更新顺序
  - 模块依赖

### 会遇到哪些问题？用什么解决？

- **执行顺序问题**
  - **问题**：有的时候代码（模块）的先后顺序，会对逻辑有影响
  - **解决方向**：
    - 这时候就要考虑脚本顺序的控制
    - 使用依赖注入
    - 使用事件系统
    - 明确模块依赖关系

- **性能问题**
  - **问题**：脚本执行可能影响游戏性能
  - **解决方向**：
    - 优化脚本逻辑，避免在Update中执行耗时操作，使用对象池等优化技术
    - 减少Update调用
    - 使用协程
    - 优化算法

### 要点和思考方向

- 脚本系统实现游戏逻辑
- 注意脚本执行顺序
- 优化脚本性能很重要
- 使用合适的脚本语言

### 插件

### 是什么？在哪用？

- **作用**：扩展引擎功能，提供额外的工具和功能
- **应用场景**：
  - 功能扩展
  - 工具开发
  - 第三方集成
- **类型**：
  - **编辑器插件**：扩展编辑器功能
  - **运行时插件**：扩展运行时功能
  - **第三方插件**：使用第三方工具

### 会遇到哪些问题？用什么解决？

- **插件兼容性**
  - **问题**：插件可能与引擎版本不兼容
  - **解决方向**：
    - 检查插件版本兼容性
    - 使用稳定的插件版本
    - 测试插件功能
    - 准备降级方案

- **插件管理**
  - **问题**：大量插件难以管理
  - **解决方向**：
    - 使用插件管理器
    - 建立插件规范
    - 定期更新插件
    - 移除不用的插件

### 要点和思考方向

- 插件扩展引擎功能
- 注意插件兼容性
- 合理管理插件
- 使用官方或可靠的插件

## 场景

### 是什么？在哪用？

- **作用**：编辑和管理游戏中的各种对象
- **应用场景**：
  - 游戏关卡编辑
  - 对象管理
  - 场景组织
- **功能**：
  - 对象放置和编辑
  - 场景保存和加载
  - 场景切换

### 会遇到哪些问题？用什么解决？

- **场景管理**
  - **问题**：大量场景难以管理
  - **解决方向**：
    - 建立场景命名规范
    - 使用场景分组
    - 使用场景管理器
    - 定期整理场景

- **场景加载**
  - **问题**：场景加载慢影响体验
  - **解决方向**：
    - 使用异步加载
    - 预加载场景
    - 优化场景资源
    - 使用场景流式加载

### 要点和思考方向

- 场景是游戏内容的基础
- 良好的场景管理提高开发效率
- 注意场景加载性能
- 支持场景切换和流式加载

## 时间轴

### 是什么？在哪用？

- **作用**：在时间轴上定义事件和动画，控制游戏时序
- **应用场景**：
  - 动画制作
  - 特效控制
  - 事件序列
  - 过场动画

### 关键帧

### 是什么？在哪用？

- **作用**：在时间轴上的特定时间点，发生指定的事情
- **应用场景**：
  - 动画关键帧
  - 事件触发点
  - 状态切换点
- **类型**：
  - **位置关键帧**：定义位置
  - **旋转关键帧**：定义旋转
  - **缩放关键帧**：定义缩放
  - **事件关键帧**：触发事件

### 会遇到哪些问题？用什么解决？

- **关键帧管理**
  - **问题**：大量关键帧难以管理
  - **解决方向**：
    - 使用关键帧编辑器
    - 合理设置关键帧密度
    - 使用关键帧分组
    - 优化关键帧数据

### 要点和思考方向

- 关键帧定义时间轴上的重要时刻
- 合理设置关键帧可以提高效率
- 使用关键帧编辑器便于管理
- 注意关键帧数据的优化

### 应用

### 是什么？在哪用？

- **作用**：时间轴的应用场景
- **应用场景**：
  - 动画制作
  - 特效控制
  - 事件序列
- **动画**：定义动画的关键帧
  - **应用**：角色动画、物体动画等
- **特效**：控制特效的播放时机
  - **应用**：技能特效、环境特效等

### 要点和思考方向

- 时间轴用于控制时序
- 动画和特效都可以使用时间轴
- 时间轴提供精确的时间控制
- 支持时间轴编辑和预览

## 数学库

### 是什么？在哪用？

- **作用**：提供游戏开发所需的数学运算功能
- **应用场景**：
  - 坐标变换
  - 物理计算
  - 图形计算
  - 游戏逻辑

### 运算

### 是什么？在哪用？

- **作用**：提供数学运算功能
- **应用场景**：
  - 基本数学运算
  - 三角函数
  - 随机数生成
- **功能**：
  - 加减乘除
  - 三角函数（sin、cos、tan等）
  - 对数、指数
  - 随机数

### 要点和思考方向

- 数学库提供基础运算功能
- 使用引擎提供的数学库可以提高性能
- 注意数学运算的精度
- 优化数学运算可以提高性能

### 向量

### 是什么？在哪用？

- **作用**：向量运算和操作
- **应用场景**：
  - 位置计算
  - 方向计算
  - 距离计算
  - 物理计算
- **操作**：
  - 向量加减
  - 向量点积、叉积
  - 向量归一化
  - 向量长度计算

### 会遇到哪些问题？用什么解决？

- **向量计算**
  - **问题**：向量计算可能影响性能
  - **解决方向**：
    - 使用SIMD优化
    - 缓存计算结果
    - 避免不必要的计算
    - 使用引擎提供的优化函数

### 要点和思考方向

- 向量是3D图形的基础
- 理解向量的运算很重要
- 注意向量计算的性能
- 使用引擎提供的向量库

### 四元组

### 是什么？在哪用？

- **作用**：四元数运算，用于旋转计算
- **应用场景**：
  - 旋转计算
  - 避免万向锁
  - 平滑旋转插值
- **优点**：
  - 避免万向锁
  - 平滑插值
  - 计算效率高

### 会遇到哪些问题？用什么解决？

- **四元数理解**
  - **问题**：四元数概念复杂，难以理解
  - **解决方向**：
    - 学习四元数基础知识
    - 使用引擎提供的API
    - 理解四元数的应用场景
    - 参考文档和示例

### 要点和思考方向

- 四元数用于旋转计算
- 可以避免万向锁问题
- 支持平滑插值
- 理解四元数有助于3D开发

### 矩阵

### 是什么？在哪用？

- **作用**：矩阵运算，用于变换计算
- **应用场景**：
  - 坐标变换
  - 视图矩阵
  - 投影矩阵
  - 模型变换
- **操作**：
  - 矩阵乘法
  - 矩阵转置
  - 矩阵求逆
  - 矩阵分解

### 会遇到哪些问题？用什么解决？

- **矩阵计算**
  - **问题**：矩阵计算复杂且容易出错
  - **解决方向**：
    - 使用引擎提供的矩阵库
    - 理解矩阵的运算顺序
    - 测试矩阵计算
    - 使用矩阵工具

### 要点和思考方向

- 矩阵用于坐标变换
- 理解矩阵的运算顺序很重要
- 使用引擎提供的矩阵库
- 注意矩阵计算的正确性

## 引擎候选

### 是什么？在哪用？

- **作用**：提供游戏开发的基础框架和工具
- **应用场景**：
  - 游戏开发
  - 原型制作
  - 学习研究

### Unity3D

### 是什么？在哪用？

- **作用**：跨平台游戏引擎，提供完整的开发工具链
- **应用场景**：
  - 各种类型的游戏开发
  - 移动游戏
  - 独立游戏
- **说明**：当下最流行的一款游戏引擎之一
- **应用**：广泛用于各种类型的游戏开发
- **特点**：
  - 跨平台支持好
  - 学习曲线平缓
  - 资源丰富
  - 社区活跃

### 要点和思考方向

- Unity是流行的游戏引擎
- 适合各种类型的游戏开发
- 学习资源丰富
- 跨平台支持好

### Unreal Engine

### 是什么？在哪用？

- **作用**：强大的3D游戏引擎，提供高质量渲染和工具
- **应用场景**：
  - 大型3D游戏
  - AAA游戏
  - 高质量图形游戏
- **说明**：一款老牌的、知名的游戏引擎
- **应用**：大型3D游戏、AAA游戏开发
- **特点**：
  - 渲染质量高
  - 功能强大
  - 适合大型项目
  - 学习曲线较陡

### 要点和思考方向

- Unreal Engine适合大型3D游戏
- 渲染质量高
- 功能强大但学习曲线陡
- 适合AAA游戏开发

### OGRE

### 是什么？在哪用？

- **作用**：开源图形渲染引擎，适合学习和自定义
- **应用场景**：
  - 学习引擎原理
  - 自定义引擎开发
  - 研究项目
- **说明**：一个开源引擎。也适合拿来学习和理解引擎底层的实现
- **应用**：学习引擎原理、自定义引擎开发
- **特点**：
  - 开源免费
  - 适合学习
  - 可定制性强
  - 需要更多开发工作

### 要点和思考方向

- OGRE适合学习引擎原理
- 开源免费
- 需要更多开发工作
- 适合研究和自定义

### Godot

### 是什么？在哪用？

- **作用**：开源游戏引擎，支持2D和3D开发
- **应用场景**：
  - 2D游戏开发
  - 3D游戏开发
  - 独立游戏
- **说明**：一个新的开源引擎
- **应用**：2D和3D游戏开发
- **特点**：
  - 开源免费
  - 轻量级
  - 支持2D和3D
  - 社区活跃

### 要点和思考方向

- Godot是开源游戏引擎
- 支持2D和3D开发
- 轻量级，适合独立游戏
- 社区活跃

### O3DE（亚马逊的）

### 是什么？在哪用？

- **作用**：亚马逊开发的开源游戏引擎
- **应用场景**：
  - 3D游戏开发
  - 大型项目
- **说明**：亚马逊开发的开放源代码游戏引擎
- **应用**：3D游戏开发
- **特点**：
  - 开源免费
  - 功能完善
  - 适合大型项目
  - 相对较新

### 要点和思考方向

- O3DE是亚马逊开发的开源引擎
- 功能完善
- 适合大型项目
- 相对较新，社区在成长

### cocosX

### 是什么？在哪用？

- **作用**：开源的2D游戏引擎
- **应用场景**：
  - 2D游戏开发
  - 移动平台游戏
- **说明**：一个开源的2D引擎
- **应用**：2D游戏开发，特别是移动平台
- **特点**：
  - 开源免费
  - 专注2D
  - 移动平台支持好
  - 轻量级

### 要点和思考方向

- Cocos适合2D游戏开发
- 移动平台支持好
- 轻量级
- 适合移动游戏

### 会遇到哪些问题？用什么解决？

- **引擎选择**
  - **问题**：不同引擎有不同的特点和适用场景
  - **解决方向**：
    - 根据项目需求、目标平台、团队技术栈、成本等因素选择合适的引擎
    - 评估引擎功能
    - 考虑学习成本
    - 测试引擎性能
    - 参考成功案例

- **引擎迁移**
  - **问题**：项目中途更换引擎困难
  - **解决方向**：
    - 在项目初期选择合适的引擎
    - 使用抽象层减少引擎依赖
    - 评估迁移成本
    - 准备迁移方案

### 要点和思考方向

- 游戏引擎是游戏开发的基础工具，选择合适的引擎很重要
- 要深入理解引擎的核心概念（对象系统、资源管理、脚本系统等）
- 注意引擎的性能特性和限制，合理使用引擎功能
- 掌握引擎的扩展机制，必要时可以开发插件扩展功能
- 根据项目需求选择合适的引擎
- 考虑团队技术栈和学习成本

## 更多资料

### 教学视频
* [Learn Unity Beginner/Intermediate 2023 (FREE COMPLETE Course - Unity Tutorial)](https://www.youtube.com/watch?v=AmGSEH7QcDg)

### 文章
* [The Entity-Component-System - An awesome game-design pattern in C++ (Part 1)](https://www.gamedeveloper.com/design/the-entity-component-system---an-awesome-game-design-pattern-in-c-part-1-)
* [【UE4没意思啊】从入门到入坟](https://zhuanlan.zhihu.com/p/196363738)