<h2 align="center">客户端底层通用系统</h2>
<p>
客户端框架层相关的功能和系统，可以被用到各种类型游戏的开发。这些系统构成了游戏的基础架构，为上层业务逻辑提供稳定的支撑。
</p>

**关键词:**<br/> 
*游戏系统，UI系统，资源系统，数据系统，文本系统，声音系统，热更系统，脚本系统*

**标签:**<br/>
*等级: 中级|高级, 阶段: 开发, 分类: 研发能力, 角色: 客户端开发*

## 图谱
![图片加载中...](../../exports/3.1.1.客户端底层通用系统.png?raw=true)

## 系统概览

客户端底层通用系统是游戏开发的基础框架，包含多个核心子系统，每个系统都解决特定的开发问题。以下是各系统的关键信息：

### 游戏系统

**做什么的？** 游戏的核心入口和状态管理框架。

**在哪用？** 作为游戏的启动入口，管理游戏的整体流程和状态切换。

**会遇到哪些问题？**
- 游戏入口如何设计？
- 如何管理游戏流程和状态切换？
- 如何协调各个系统的运转？

**要点和思考方向：**
- 状态化管理，让游戏流程和切换更清晰
- 需要协调各个系统的运转
- 考虑游戏启动、暂停、恢复等状态管理

### 网络系统

**做什么的？** 处理客户端与服务器之间的通信。

**在哪用？** 所有需要网络交互的游戏功能。

**详情参考：** [3.1.4.客户端网络系统](./3.1.4.客户端网络系统.md)

### UI系统

**做什么的？** 用户界面管理和渲染系统。

**在哪用？** 所有需要用户交互的界面。

**详情参考：** [3.1.6.UI系统](./3.1.6.UI系统.md)

### 资源系统

**做什么的？** 游戏资源的加载、管理和释放系统。

**在哪用？** 所有需要加载游戏资源的地方（模型、贴图、音频、配置等）。

**会遇到哪些问题？**
- 如何实现灵活、可控的资源加载方式？
- 如何支持异步加载？
- 如何实现分优先级加载？
- 如何支持预加载和后端加载？
- 如何处理资源的依赖和重复加载？

**要点和思考方向：**
- 需要实现自动加载和自动释放的机制
- 考虑资源加载的优先级管理
- 设计资源依赖关系管理
- 避免重复加载相同资源

### 数据系统

**做什么的？** 游戏数据的管理和访问系统，支持数据驱动的开发方式。

**在哪用？** 需要配置化、数据驱动的游戏内容（角色属性、关卡配置、道具数据等）。

**会遇到哪些问题？**
- 如何实现数据驱动的内容开发？
- 如何管理基于表格结构的数据资源？
- 如何方便地访问指定表格的数据？

**要点和思考方向：**
- 通过 Key 来获取数据记录
- 支持表格结构的数据资源管理
- 提供便捷的数据访问接口

### 文本系统

**做什么的？** 多语言文本管理和本地化系统。

**在哪用？** 所有需要显示文本的界面和功能。

**会遇到哪些问题？**
- 如何支持多语言文本本地化？
- 如何快速、动态地进行本地化切换？

**要点和思考方向：**
- 提供通过 Key 来获取本地化文本的接口
- 支持运行时动态切换语言
- 考虑文本格式化和参数替换

### 用户系统

**做什么的？** 用户登录、登出和支付相关的管理系统。

**在哪用？** 需要用户认证和支付功能的所有游戏。

**会遇到哪些问题？**
- 如何管理登录状态？
- 如何快速接入第三方账户管理和支付？
- 如何设计完善的登录流程和状态管理？
- 如何处理异常情况？

**要点和思考方向：**
- 提供用户登录、登出接口
- 提供支付相关接口
- 完善的异常处理机制
- 支持第三方账户和支付 SDK 的快速接入

### 热更系统

**做什么的？** 游戏内容的无痕更新系统，支持增量更新。

**在哪用？** 需要在不重新发布应用的情况下更新游戏内容。

**会遇到哪些问题？**
- 如何实现无痕更新，给用户更好的体验？
- 如何支持多线程并发下载？
- 如何处理更新异常？
- 如何只更新差异内容，减少下载量？

**要点和思考方向：**
- 支持增量更新，只下载差异内容
- 多线程并发下载，提高更新速度
- 完善的异常处理和重试机制
- 考虑断点续传功能

### 脚本（Lua）系统

**做什么的？** 让游戏代码可热更新的脚本系统。

**在哪用？** 需要热更新的游戏业务逻辑。

**会遇到哪些问题？**
- 如何让游戏代码可热更？
- 如何让游戏业务层逻辑可脚本化开发？
- 如何实现脚本系统和底层系统之间的有效访问？

**要点和思考方向：**
- **Lua 方案候选：**
  - ToLua
  - xLua
  - uLua
  - sLua
- **C# 方案候选：**
  - [HybridCLR](https://github.com/focus-creative-games/hybridclr) - 支持 C# 热更新
- 产品的业务逻辑主要都在这里实现
- 需要设计好脚本与底层系统的交互接口

### 声音系统

**做什么的？** 游戏音频的播放和管理系统。

**在哪用？** 所有需要播放音效和背景音乐的地方。

**会遇到哪些问题？**
- 声音对象不能无限播放，要有池子管理
- 声音播放要有优先级
- 要有裁剪，去掉无效的播放

**要点和思考方向：**
- 实现音频对象池管理
- 设计音频播放优先级机制
- 自动裁剪无效播放，优化性能

### 工具类/模块集

**做什么的？** 提供各种通用工具和辅助功能。

**在哪用？** 游戏开发的各个场景。

**包含的工具：**
- **加密/解密/压缩：** 数据安全处理
- **文件操作：** 文件读写和管理
- **字符串操作：** 字符串处理工具
- **协同：** 协程管理
- **时间：** 时区处理、日期格式转换
- **调试/日志：** 开发调试和日志记录
  - 可用中间件：ConsolePro 等

### 动画系统

**做什么的？** 游戏动画和曲线运动系统。

**在哪用？** 物体运动轨迹、UI 动画表现等。

**会遇到哪些问题？**
- 如何实现平滑的物体运动轨迹？
- 如何实现流畅的 UI 动画表现？
- 如何处理 2D 骨骼动画？

**要点和思考方向：**
- **曲线工具候选：**
  - Tweener
  - HoTween
- **2D 骨骼动画候选：**
  - Spine

## 更多资料
