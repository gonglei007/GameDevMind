<h2 align="center">角色</h2>
<p>
对于有角色的游戏，其中一个最重要的体验感就是来自于角色，包括角色的表现、动作、行为、控制等等。角色系统涉及基本特性、物理表现、角色控制、战斗系统等多个方面。
</p>

**关键词:**<br/>
*Character,FSM,HFSM,布娃娃,软体,状态机*

## 图谱
![图片加载中...](../../exports/3.3.2.角色.png?raw=true)

## 角色系统概览

### 基本特性

**做什么的？** 角色的基础属性和能力。

**在哪用？** 所有有角色的游戏。

**要点和思考方向：**
- **属性：**
  - 速度
  - 力量
  - 敏捷/重量
- **能力：** 角色的特殊能力

### 物理表现

**做什么的？** 角色的物理交互和表现。

**在哪用？** 需要物理交互的游戏。

**会遇到哪些问题？**
- 如何实现角色的物理表现？
- 如何处理角色与场景的交互？

**要点和思考方向：**
- 能被阻挡
- 不能被穿透
- 贴着地形走
- 要有物理，但又不能"躺倒"
- **布娃娃：**
  - **应用举例：**
    - 死亡后
    - 被炸飞
- **软体：**
  - 服饰
  - 非人类角色

### 角色表现与行为

**做什么的？** 角色的动作、表情、语音等表现。

**在哪用？** 所有有角色的游戏。

**会遇到哪些问题？**
- 如何实现自然的动作切换？
- 如何处理动作的打断和过渡？

**要点和思考方向：**

**动作：**
- **考虑问题：**
  - 动作切换的自然过渡
  - 做一个动作的时候（未完）是否可以切换到下一个动作？
- **动作举例：**
  - **常规：** 出场、移动、跳跃、死亡
  - **射击游戏：** 射击、跪射、俯射
  - **动作游戏：** 放技能、冲击、攀爬

**表情：**
- **举例：** 平常、开心、愤怒、被打、死亡

**语音：**
- 出场
- 被攻击
- 死亡

### 角色控制

**做什么的？** 角色的控制方式和辅助功能。

**在哪用？** 所有需要角色控制的游戏。

**会遇到哪些问题？**
- 如何实现玩家控制？
- 如何实现AI控制？
- 如何处理第一人称和第三人称？

**要点和思考方向：**
- **控制类型：**
  - 玩家控制
  - AI控制（寻路、策略）
  - 动画控制
- **控制辅助：** 自动目标锁定
- **第一人称：** 第一人称视角控制
- **第三人称：** 第三人称视角控制

### 战斗系统

**做什么的？** 角色的战斗框架和体验。

**在哪用？** 有战斗系统的游戏。

**会遇到哪些问题？**
- 如何设计战斗框架？
- 如何提供战斗决策支持？
- 如何平衡战斗体验？

**要点和思考方向：**

**框架：**
- **操作决策：**
  - **提供：** 在战斗中如何获得更优（或者更符合设计需要）的决策
  - **举例：** 追击、攻击、放技能
- **行为策略：**
  - **提供：** 战场态势观察和针对态势做出自身的反应
  - **举例：** BOSS、NPC、玩家
- **基本功能：**
  - **提供：** 各种跟决策判断无关的基础操作
  - **举例：** 行走、动画、寻路

**附加考虑：**
- 平衡性

**体验：**
- 动画系统、特效系统、镜头处理、音效、震动反馈、后处理

### 附加技术考虑

**做什么的？** 角色系统需要的附加技术。

**在哪用？** 复杂的角色系统。

**要点和思考方向：**
- **网络同步：** 多人游戏中角色的同步
- **状态机FSM/HFSM：** 管理角色的状态转换

### 中间件

**做什么的？** 可用的角色控制中间件。

**在哪用？** Unity游戏项目。

**要点和思考方向：**
- **Unity：**
  - Third Person Controller
  - Ultimate Character Controller

## 更多资料
### 视频资料
* [FIRST PERSON MOVEMENT in Unity - FPS Controller](https://www.youtube.com/watch?v=_QajrabyTJc)
* [THIRD PERSON MOVEMENT in Unity](https://www.youtube.com/watch?v=4HpC--2iowE)
* [RIVAL DOTS Character Controller FREE on Unity Asset Store!](https://www.youtube.com/watch?v=aM_BGRAe8Y4)

### 实践资料
* [Unity DOTS Character Controller](https://www.vertexfragment.com/ramblings/unity-dots-character-controller) - 使用Unity的DOTS（Data-Oriented Tech Stack）和新的Entities（ECS）和Physics包，实现了一个基本的动力学角色控制器。
* [Unity DOTS Character Controller(Example)](https://github.com/ssell/UnityDotsCharacterController)
* [Rival - DOTS Character Controller](https://forum.unity.com/threads/released-rival-dots-character-controller.1118761/) - 一个扩展性优良的DOTS角色控制器。
* [Making a Character Controller, Part 31: Flight Controls](https://www.youtube.com/watch?v=fqB-8z6-jeQ) - 学习制作一个功能完整的角色控制器，从输入管理到适用于行走、车辆和飞行的模块化控制方案。适合初学者和有一定Unity和C#基础的中级开发者。
