<h2 align="center">摄像机控制</h2>
<p>
不同的游戏类型会采用不同的镜头控制方式，这影响到游戏的表达和玩家的体验。摄像机控制包括第一人称、第三人称、滚动式镜头、视差镜头等多种方式，每种方式都有其特定的应用场景和技术要点。
</p>

**关键词:**<br/>
*第一人称,第三人称,滚动式镜头,视差镜头,固定镜头,Cinemachine*

**标签:**<br/>
*等级: 中级, 阶段: 开发, 分类: 研发能力, 角色: 客户端开发|策划*

## 图谱
![图片加载中...](../../exports/3.3.1.摄像机控制.png)

## 控制方式概览

### 基本控制

**做什么的？** 摄像机的基本运动控制。

**在哪用？** 所有需要摄像机控制的游戏。

**会遇到哪些问题？**
- 如何实现流畅的镜头移动？
- 如何提升镜头操作的体验？

**要点和思考方向：**

**镜头移动：**
- **Pitch：** 镜头基于左右方向的轴上下转动
- **Yaw：** 镜头基于上下方向的轴左右转动
- **Roll：** 镜头基于前后方向的轴转动（不太会用在角色的摄像机中，甚至其它地方也很少用到）
- **第一人称时：** 基于角色自身的轴来转动
- **第三人称时：** 一般是以角色为Look at的目标点来转动

**镜头体验：**
- 操作镜头运动时，让镜头有一定的加速度和阻力，来提升镜头运动的体验

**镜头振动：** 实现镜头震动效果

**约束：**
- **说明：** 将摄像机的运动限定在一个指定的空间中
- **作用：** 防止"穿帮"、避免不好的视角

**分屏/画中画：**
- **应用举例：**
  - 多人（同屏）游戏
  - 赛车后视镜
- **考虑问题：**
  - **性能：** 每个分屏摄像机都要走一遍渲染管线，要考虑不同屏幕中的内容的优化

### 第一人称视角

**做什么的？** 以角色视角观察游戏世界。

**在哪用？** FPS游戏、部分RPG游戏等。

**要点和思考方向：**
- **说明：** 相对简单，跟角色绑定，跟着角色动就行
- **应用举例：** FPS游戏

### 第三人称视角

**做什么的？** 以第三人称视角观察角色和游戏世界。

**在哪用？** 动作冒险游戏、赛车游戏、格斗游戏等。

**会遇到哪些问题？**
- 如何设置合适的镜头位置？
- 如何处理镜头失序（穿透场景）？
- 如何处理遮挡问题？
- 如何实现流畅的镜头跟随？

**要点和思考方向：**

**镜头位置：**
- 镜头高度
- 镜头距离

**镜头失序：**
- **问题：** 摄像机会穿透场景或者其它角色，看到不该看到的面或者视角
- **解决：**
  - 限制镜头的运动范围（上下、左右、前后）
  - 用摄像机碰撞检测来检测是否有穿插，发生穿插后，根据游戏的功能需求和体验需求，来调整摄像机的位置（最好平滑移动过去）
  - 限制摄像机和角色的距离，如果距离太近，就把角色透明化

**遮挡：**
- **问题：** 角色和摄像机之间可能会被场景中的物体遮挡
- **解决：**
  - 让遮挡物半透明
  - 调整摄像机跟角色的距离或者角度
- **相关技术：** 射线检测

**镜头跟随：**
- **解决问题：**
  - 要考虑摄像机随着赛车运动的惯性和阻尼
  - 不能让用户有眩晕感

**应用举例：**
- 动作冒险游戏
- 赛车游戏
- 格斗游戏

**多目标：**
- **应用：** 多人游戏时，要让多个目标保持"同框"

### 非3D角色摄像机

**做什么的？** 2D游戏或特殊视角的摄像机控制。

**在哪用？** 2D游戏、横版游戏等。

**要点和思考方向：**

**滚动式镜头：**
- **应用举例：**
  - 冒险游戏
  - 即时战略游戏
- **解决问题：** 让移动镜头时有一定的加速度（正的或者负的），还要有一定的阻尼感

**视差镜头：**
- **说明：** 场景前后分多层，表现近景、远景。让2D场景也有一定的立体感和层次感
- **应用举例：**
  - 横版过关游戏
  - 格斗游戏

**自由视角：**
- **应用：** 总览全景

**固定镜头：**
- **应用举例：** 益智游戏

### 中间件

**做什么的？** 可用的摄像机控制中间件。

**在哪用？** Unity游戏项目。

**要点和思考方向：**
- **候选：** Cinemachine（Unity）- Unity官方的摄像机控制工具

## 更多资料
### 视频资料
* [游戏镜头选择，不止看起来那么简单](https://www.zhihu.com/zvideo/1456023883593359361) - 从游戏设计的角度谈的游戏镜头的种类、特色和选择。
* [Making Camera Controls in Unity - Open Kinematic Character Controller](https://www.youtube.com/watch?v=Zw6qvOOHGC4)
* [THIRD PERSON MOVEMENT in Unity](https://www.youtube.com/watch?v=4HpC--2iowE) - how to make a solid third person controller with a moving camera!