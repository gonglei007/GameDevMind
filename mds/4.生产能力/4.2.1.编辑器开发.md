<h2 align="center">编辑器开发</h2>
<p>
虽然现在越来越多的工具都已经由引擎或者第三方实现了，但很多团队仍然需要为自己产品定制编辑器和小工具，以适配特定的数据结构、工作流和协作方式。本章节聚焦「怎么设计一个好用的游戏编辑器」的原则和关键功能点。
</p>

**关键词:**<br/>
*所见即所得,Undo/Redo,视图,面板,工程文件,插件系统*

**标签:**<br/>
*等级: 高级, 阶段: 开发, 分类: 生产能力, 角色: 客户端开发*

## 图谱

## 目录

- [设计原则](#设计原则)
- [所见即所得](#所见即所得)
- [基础功能模块](#基础功能模块)
- [文件与数据](#文件与数据)
- [编辑能力](#编辑能力)
- [构建与导出](#构建与导出)
- [视图与窗口布局](#视图与窗口布局)
- [面板与属性编辑](#面板与属性编辑)
- [编辑器开发要点](#编辑器开发要点)
- [候选 GUI 或框架](#候选-gui-或框架)
- [插件系统](#插件系统)
- [交互设计](#交互设计)
- [工程与文件组织](#工程与文件组织)
- [快速开发方案](#快速开发方案)
- [轻量工具的快速实现](#轻量工具的快速实现)
- [应用举例](#应用举例)
- [场景编辑器](#场景编辑器)
- [特效编辑器](#特效编辑器)
- [UI 编辑器](#ui-编辑器)
- [更多资料](#更多资料)

----

## 设计原则

## 所见即所得

**是什么？在哪用？**

- **作用**：让策划、美术在编辑器中看到的效果，与游戏中真实效果尽可能一致，减少反复调试和来回切换
- **应用场景**：
  - 游戏内容制作
  - 美术资源制作
  - 关卡设计
  - 特效制作
- **做什么的？** 让策划、美术在编辑器中看到的效果，与游戏中真实效果尽可能一致，减少反复调试和来回切换。

**会遇到哪些问题？用什么解决？**

- **如何实现所见即所得？**
  - **问题**：需要让编辑器预览效果与游戏运行时一致
  - **解决方向**：
    - **要点与思考方向：**
      - **预览视图尽量使用与运行时一致的渲染管线与资源：** 渲染一致性
        - 使用相同的渲染管线
        - 使用相同的资源格式
        - 实现实时预览
        - 减少效果差异
      - **对关键参数（位置、尺寸、颜色、动画曲线等）修改后能实时反馈：** 实时反馈
        - 实现参数实时更新
        - 实现预览刷新
        - 优化更新性能
        - 提高编辑效率
      - **必要时提供「运行时模拟」功能（如播放特效、实际物理模拟）：** 运行时模拟
        - 实现特效播放
        - 实现物理模拟
        - 实现动画播放
        - 提供完整预览
    - 使用相同的渲染系统
    - 实现实时预览机制
    - 优化预览性能

**要点和思考方向：**
- 所见即所得是编辑器设计的核心原则
- 使用与运行时一致的渲染管线保证效果一致
- 实现实时反馈提高编辑效率
- 提供运行时模拟功能增强预览能力

## 基础功能模块

## 文件与数据

**是什么？在哪用？**

- **作用**：负责数据的存储、加载和工程管理
- **应用场景**：
  - 编辑器数据管理
  - 工程文件管理
  - 数据格式转换
- **做什么的？** 负责数据的存储、加载和工程管理。

**会遇到哪些问题？用什么解决？**

- **如何管理工程文件？**
  - **问题**：需要管理复杂的工程文件结构
  - **解决方向**：
    - **要点：**
      - **数据存储 / 加载：** 数据管理
        - **支持项目工程文件（工程结构、引用资源路径等）：** 工程文件
          - 实现工程文件格式
          - 管理工程结构
          - 管理资源引用
          - 实现工程加载
        - **支持增量保存和自动备份 / 版本标记：** 保存机制
          - 实现增量保存
          - 实现自动备份
          - 实现版本标记
          - 提高数据安全性
    - 设计工程文件格式
    - 实现文件管理系统
    - 实现备份机制

- **如何打通数据格式？**
  - **问题**：需要与游戏工程数据格式打通
  - **解决方向**：
    - **要点：**
      - **支持与游戏工程中实际使用的数据格式打通（如 JSON、二进制、自定义格式）：** 数据格式
        - 支持JSON格式
        - 支持二进制格式
        - 支持自定义格式
        - 实现格式转换
    - 实现数据格式转换
    - 建立数据格式规范
    - 优化数据加载性能

**要点和思考方向：**
- 文件与数据是编辑器的基础
- 设计良好的工程文件格式提高可维护性
- 实现增量保存和备份保证数据安全
- 打通数据格式减少转换成本

## 编辑能力

**是什么？在哪用？**

- **作用**：提供高效、安全的编辑体验
- **应用场景**：
  - 编辑器操作
  - 内容编辑
  - 批量处理
- **做什么的？** 提供高效、安全的编辑体验。

**会遇到哪些问题？用什么解决？**

- **如何实现Undo/Redo？**
  - **问题**：需要实现可撤销和重做功能
  - **解决方向**：
    - **核心能力：**
      - **Undo / Redo：** 撤销重做
        - **使用命令模式或操作日志实现可撤销 / 重做：** 实现方式
          - 使用命令模式
          - 使用操作日志
          - 实现撤销栈
          - 实现重做栈
        - **支持多步撤销：** 多步撤销
          - 实现撤销历史
          - 管理撤销栈大小
          - 优化内存使用
    - 使用命令模式
    - 实现操作日志
    - 优化撤销性能

- **如何实现批量操作？**
  - **问题**：需要支持批量操作提高效率
  - **解决方向**：
    - **核心能力：**
      - **批量操作：批量重命名、批量修改属性等：** 批量处理
        - 实现批量重命名
        - 实现批量修改属性
        - 实现批量选择
        - 优化批量性能
    - 实现批量操作框架
    - 优化批量处理性能
    - 提供批量操作工具

**要点和思考方向：**
- 编辑能力是编辑器的核心功能
- 实现完善的Undo/Redo提高编辑安全性
- 支持批量操作提高编辑效率
- 优化编辑性能保证流畅体验

## 构建与导出

**是什么？在哪用？**

- **作用**：将编辑器中的数据转化为游戏工程可用的资源
- **应用场景**：
  - 资源导出
  - 数据转换
  - 构建流程
- **做什么的？** 将编辑器中的数据转化为游戏工程可用的资源。

**会遇到哪些问题？用什么解决？**

- **如何实现资源生成？**
  - **问题**：需要将编辑器数据转换为游戏资源
  - **解决方向**：
    - **要点：**
      - **资源生成：** 资源导出
        - **生成游戏工程中可用的数据文件：** 数据生成
          - 实现数据转换
          - 实现格式生成
          - 优化生成性能
        - **支持一键批量构建 / 按模块构建：** 批量构建
          - 实现批量构建
          - 实现模块构建
          - 实现构建队列
          - 优化构建性能
    - 实现资源生成器
    - 实现构建系统
    - 优化构建性能

- **如何实现构建日志和错误处理？**
  - **问题**：需要清晰的构建日志和错误提示
  - **解决方向**：
    - **要点：**
      - **构建日志与错误提示：清晰标明出错资源和原因：** 错误处理
        - 实现构建日志
        - 实现错误提示
        - 实现错误定位
        - 提高调试效率
    - 实现日志系统
    - 实现错误报告
    - 优化错误提示

**要点和思考方向：**
- 构建与导出是编辑器与游戏工程的桥梁
- 实现高效的资源生成提高开发效率
- 提供清晰的构建日志便于问题排查
- 优化构建性能减少等待时间

## 视图与窗口布局

**是什么？在哪用？**

- **作用**：组织编辑器中的各类视图与面板
- **应用场景**：
  - 编辑器界面组织
  - 视图管理
  - 窗口布局
- **做什么的？** 组织编辑器中的各类视图与面板。

**会遇到哪些问题？用什么解决？**

- **如何组织视图？**
  - **问题**：需要组织多种类型的视图
  - **解决方向**：
    - **典型视图：**
      - **编辑视图（主工作区，如场景视图、时间轴视图等）：** 编辑视图
        - 实现场景视图
        - 实现时间轴视图
        - 实现其他编辑视图
        - 优化视图性能
      - **预览视图（运行效果预览）：** 预览视图
        - 实现实时预览
        - 实现预览控制
        - 优化预览性能
    - 设计视图架构
    - 实现视图管理
    - 优化视图性能

- **如何实现窗口布局？**
  - **问题**：需要灵活的窗口布局系统
  - **解决方向**：
    - 实现可停靠窗口
    - 实现布局保存
    - 实现布局恢复
    - 优化布局性能

**要点和思考方向：**
- 视图与窗口布局影响编辑器使用体验
- 设计清晰的视图组织提高可用性
- 实现灵活的窗口布局满足不同需求
- 优化视图性能保证流畅操作

## 面板与属性编辑

**是什么？在哪用？**

- **作用**：为选中对象提供属性查看与编辑界面
- **应用场景**：
  - 对象属性编辑
  - 参数调整
  - 配置管理
- **做什么的？** 为选中对象提供属性查看与编辑界面。

**会遇到哪些问题？用什么解决？**

- **如何实现属性面板？**
  - **问题**：需要支持多种类型的属性编辑
  - **解决方向**：
    - **要点：**
      - **属性面板：支持多类型字段（数值、枚举、颜色、曲线、列表等）：** 属性编辑
        - 实现数值编辑
        - 实现枚举选择
        - 实现颜色选择器
        - 实现曲线编辑器
        - 实现列表编辑
        - 实现自定义编辑器
    - 实现属性编辑器框架
    - 实现各种类型编辑器
    - 优化编辑性能

- **如何实现多选编辑？**
  - **问题**：需要支持多选对象的属性编辑
  - **解决方向**：
    - **要点：**
      - **支持多选编辑与重置默认值：** 多选编辑
        - 实现多选支持
        - 实现批量编辑
        - 实现默认值重置
        - 优化多选性能
    - 实现多选机制
    - 实现批量编辑
    - 优化多选性能

**要点和思考方向：**
- 面板与属性编辑是编辑器的核心交互
- 支持多种类型字段提高编辑能力
- 实现多选编辑提高编辑效率
- 优化属性编辑性能保证流畅体验

## 编辑器开发要点

## 候选 GUI 或框架

**是什么？在哪用？**

- **作用**：选择合适的技术栈来开发独立编辑器或工具
- **应用场景**：
  - 编辑器开发
  - 工具开发
  - 桌面应用开发
- **做什么的？** 选择合适的技术栈来开发独立编辑器或工具。

**会遇到哪些问题？用什么解决？**

- **如何选择GUI框架？**
  - **问题**：需要选择合适的GUI框架
  - **解决方向**：
    - **常见选择：**
      - **Dotnet：** .NET框架
        - Windows平台支持
        - 丰富的控件库
        - 良好的开发体验
      - **wxWidgets：** wxWidgets框架
        - 跨平台支持
        - 原生外观
        - C++开发
      - **Qt：** Qt框架
        - 跨平台支持
        - 丰富的功能
        - 良好的文档
    - **思考方向：**
      - **跨平台需求（Windows / macOS / Linux）：** 跨平台支持
        - 评估跨平台需求
        - 选择跨平台框架
        - 实现平台适配
      - **与现有引擎或项目技术栈的契合度：** 技术栈契合
        - 评估技术栈
        - 选择契合框架
        - 实现集成方案
    - 评估框架特性
    - 评估开发成本
    - 评估维护成本

**要点和思考方向：**
- 选择合适的GUI框架影响开发效率
- 考虑跨平台需求选择合适框架
- 考虑技术栈契合度减少集成成本
- 评估框架特性和成本做出最佳选择

## 插件系统

**是什么？在哪用？**

- **作用**：让编辑器可以被扩展，而不用每次改动都动核心代码
- **应用场景**：
  - 编辑器扩展
  - 功能定制
  - 工具集成
- **做什么的？** 让编辑器可以被扩展，而不用每次改动都动核心代码。

**会遇到哪些问题？用什么解决？**

- **如何实现插件系统？**
  - **问题**：需要实现可扩展的插件系统
  - **解决方向**：
    - **要点：**
      - **支持通过插件添加新面板、新工具、新导出流程：** 插件功能
        - 实现插件接口
        - 实现插件加载
        - 实现插件管理
        - 支持面板扩展
        - 支持工具扩展
        - 支持导出流程扩展
      - **通过脚本语言（如 C#、Lua、Python 等）或动态库扩展：** 插件实现
        - 支持C#脚本
        - 支持Lua脚本
        - 支持Python脚本
        - 支持动态库
        - 实现脚本引擎
    - 设计插件架构
    - 实现插件接口
    - 实现插件管理

**要点和思考方向：**
- 插件系统提高编辑器的可扩展性
- 设计良好的插件接口便于扩展
- 支持多种插件实现方式提高灵活性
- 实现完善的插件管理保证稳定性

## 交互设计

**是什么？在哪用？**

- **作用**：保证编辑器操作流畅、高效，降低学习成本
- **应用场景**：
  - 编辑器交互
  - 用户操作
  - 效率提升
- **做什么的？** 保证编辑器操作流畅、高效，降低学习成本。

**会遇到哪些问题？用什么解决？**

- **如何设计交互？**
  - **问题**：需要设计流畅高效的交互方式
  - **解决方向**：
    - **要点：**
      - **菜单（主菜单、上下文菜单）：** 菜单系统
        - 实现主菜单
        - 实现上下文菜单
        - 实现菜单组织
        - 优化菜单性能
      - **快捷键（为高频操作设计快捷键）：** 快捷键系统
        - 设计快捷键方案
        - 实现快捷键绑定
        - 实现快捷键冲突检测
        - 支持快捷键自定义
      - **工具栏（常用操作按钮，图标清晰）：** 工具栏
        - 实现工具栏
        - 设计清晰图标
        - 实现工具栏自定义
        - 优化工具栏性能
    - 设计交互规范
    - 实现交互系统
    - 优化交互性能

**要点和思考方向：**
- 交互设计影响编辑器使用体验
- 设计清晰的菜单和工具栏提高可用性
- 实现快捷键提高操作效率
- 优化交互性能保证流畅体验

## 工程与文件组织

**是什么？在哪用？**

- **作用**：管理编辑器层面的「项目」概念
- **应用场景**：
  - 项目管理
  - 文件组织
  - 配置管理
- **做什么的？** 管理编辑器层面的「项目」概念。

**会遇到哪些问题？用什么解决？**

- **如何管理工程文件？**
  - **问题**：需要管理工程文件和配置
  - **解决方向**：
    - **要点：**
      - **工程文件：记录当前项目的资源路径、设置等：** 工程管理
        - 实现工程文件格式
        - 管理资源路径
        - 管理项目设置
        - 实现工程加载
      - **支持多项目切换、导入 / 导出配置：** 多项目管理
        - 实现多项目支持
        - 实现项目切换
        - 实现配置导入导出
        - 优化项目切换性能
    - 设计工程文件格式
    - 实现工程管理系统
    - 优化工程加载性能

**要点和思考方向：**
- 工程与文件组织是编辑器的基础
- 设计良好的工程文件格式提高可维护性
- 支持多项目管理提高灵活性
- 优化工程加载性能减少等待时间

## 快速开发方案

## 轻量工具的快速实现

**是什么？在哪用？**

- **作用**：针对需求较轻的场景，快速搭建 GUI 工具，而不必从零开发桌面应用
- **应用场景**：
  - 轻量工具开发
  - 快速原型
  - 批处理工具
- **做什么的？** 针对需求较轻的场景，快速搭建 GUI 工具，而不必从零开发桌面应用。

**会遇到哪些问题？用什么解决？**

- **如何快速开发工具？**
  - **问题**：需要快速开发轻量工具
  - **解决方向**：
    - **候选技术：**
      - **electron 等 Web 技术栈：** Web技术栈
        - 使用Electron框架
        - 使用Web技术开发
        - 跨平台支持
        - 快速开发
    - **应用场景：**
      - **轻量的数据编辑器：** 数据编辑
        - 实现数据编辑工具
        - 实现数据验证
        - 优化编辑性能
      - **批处理工具（重命名、路径转换、打包脚本可视化等）：** 批处理工具
        - 实现批处理功能
        - 实现可视化界面
        - 优化处理性能
    - 选择合适的快速开发框架
    - 实现工具功能
    - 优化工具性能

**要点和思考方向：**
- 快速开发方案适合轻量工具开发
- 使用Web技术栈可以快速开发跨平台工具
- 评估需求选择合适的开发方案
- 优化工具性能保证使用体验

## 应用举例

## 场景编辑器

**是什么？在哪用？**

- **作用**：用于搭建关卡与场景，摆放物体、配置触发器等
- **应用场景**：
  - 关卡设计
  - 场景搭建
  - 物体摆放
  - 触发器配置
- **做什么的？** 用于搭建关卡与场景，摆放物体、配置触发器等。

**会遇到哪些问题？用什么解决？**

- **如何实现场景编辑？**
  - **问题**：需要实现场景编辑功能
  - **解决方向**：
    - 实现场景视图
    - 实现物体摆放
    - 实现触发器配置
    - 实现场景保存
    - 优化编辑性能

**要点和思考方向：**
- 场景编辑器是关卡设计的重要工具
- 实现直观的场景视图提高编辑效率
- 支持物体摆放和触发器配置
- 优化编辑性能保证流畅操作

## 特效编辑器

**是什么？在哪用？**

- **作用**：用于制作粒子特效、屏幕特效等，可实时预览与调参数
- **应用场景**：
  - 特效制作
  - 参数调整
  - 效果预览
- **做什么的？** 用于制作粒子特效、屏幕特效等，可实时预览与调参数。

**会遇到哪些问题？用什么解决？**

- **如何实现特效编辑？**
  - **问题**：需要实现特效编辑和预览
  - **解决方向**：
    - 实现粒子系统编辑
    - 实现参数调整
    - 实现实时预览
    - 实现特效保存
    - 优化预览性能

**要点和思考方向：**
- 特效编辑器是特效制作的重要工具
- 实现实时预览提高制作效率
- 支持参数调整和效果预览
- 优化预览性能保证流畅体验

## UI 编辑器

**是什么？在哪用？**

- **作用**：用于可视化搭建 UI 布局和交互逻辑
- **应用场景**：
  - UI设计
  - 布局搭建
  - 交互配置
- **做什么的？** 用于可视化搭建 UI 布局和交互逻辑。

**会遇到哪些问题？用什么解决？**

- **如何实现UI编辑？**
  - **问题**：需要实现UI编辑和布局
  - **解决方向**：
    - 实现可视化编辑
    - 实现布局系统
    - 实现交互配置
    - 实现UI保存
    - 优化编辑性能

**要点和思考方向：**
- UI编辑器是UI设计的重要工具
- 实现可视化编辑提高设计效率
- 支持布局系统和交互配置
- 优化编辑性能保证流畅操作

## 更多资料
* [Does the Command Pattern Require Undo?](https://codinghelmet.com/articles/does-the-command-pattern-require-undo)